(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30771d36"],{"3cb8":function(e,t,a){"use strict";a("c2b9")},"424f":function(e,t,a){},8870:function(e,t,a){"use strict";a("424f")},9639:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"left"},[a("el-card",{staticClass:"box-card ",staticStyle:{width:"100%"},attrs:{header:"个人信息"}},[a("div",{staticStyle:{overflow:"hidden","text-align":"center"}},[a("el-upload",{ref:"upload",staticClass:"img-p",attrs:{"auto-upload":!1,multiple:!1,limit:1,accept:"image/jpeg,image/gif,image/png",action:"","show-file-list":!1,"on-change":e.uploadFiles}},[e.imageUrl?a("img",{staticClass:"avatar img",attrs:{src:e.imageUrl,title:"点击修改头像"}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("div",{staticClass:"left-item"},[a("svg-icon",{attrs:{"icon-class":"user"}}),e._v(" 用户昵称"),a("span",{staticClass:"left-span"},[e._v(e._s(e.data.nickName))])],1),a("div",{staticClass:"left-item"},[a("svg-icon",{attrs:{"icon-class":"phone"}}),e._v(" 手机号码"),a("span",{staticClass:"left-span"},[e._v(e._s(e.data.phone))])],1),21!=e.roleId?a("div",{staticClass:"left-item"},[a("svg-icon",{attrs:{"icon-class":"tree"}}),e._v(" 所属部门"),a("span",{staticClass:"left-span"},[e._v(e._s(e.data.dept))])],1):e._e(),21!=e.roleId?a("div",{staticClass:"left-item"},[a("svg-icon",{attrs:{"icon-class":"peoples"}}),e._v(" 所属角色"),a("span",{staticClass:"left-span"},[e._v(e._s(e.data.role))])],1):e._e(),a("div",{staticClass:"left-item"},[a("svg-icon",{attrs:{"icon-class":"date"}}),e._v(" 创建日期"),a("span",{staticClass:"left-span"},[e._v(e._s(e.data.userCreate))])],1)])],1),a("div",{staticClass:"right"},[a("el-card",{staticClass:"box-card",staticStyle:{width:"100%"},attrs:{header:"基本资料"}},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基本资料",name:"基本资料"}},[a("el-form",{ref:"dataForm",staticClass:"demo-ruleForm",staticStyle:{overflow:"hidden"},attrs:{model:e.dataForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户昵称",prop:"nickName"}},[a("el-input",{model:{value:e.dataForm.nickName,callback:function(t){e.$set(e.dataForm,"nickName",t)},expression:"dataForm.nickName"}})],1),a("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[a("el-input",{model:{value:e.dataForm.phone,callback:function(t){e.$set(e.dataForm,"phone",t)},expression:"dataForm.phone"}})],1),21==e.roleId?a("el-form-item",{attrs:{label:"地址",prop:21==e.roleId?"address":"a"}},[a("el-input",{model:{value:e.dataForm.address,callback:function(t){e.$set(e.dataForm,"address",t)},expression:"dataForm.address"}})],1):e._e(),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.update()}}},[e._v("保存")]),a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.reset()}}},[e._v("重置")])],1)],1)],1),a("el-tab-pane",{attrs:{label:"修改密码",name:"修改密码"}},[a("el-form",{ref:"psdForm",staticClass:"demo-ruleForm",staticStyle:{overflow:"hidden"},attrs:{model:e.psdForm,rules:e.psdrules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"旧密码",prop:"oldpsd"}},[a("el-input",{attrs:{"show-password":"",clearable:""},model:{value:e.psdForm.oldpsd,callback:function(t){e.$set(e.psdForm,"oldpsd",t)},expression:"psdForm.oldpsd"}})],1),a("el-form-item",{attrs:{label:"新密码",prop:"newpsd1"}},[a("el-input",{attrs:{"show-password":"",clearable:""},model:{value:e.psdForm.newpsd1,callback:function(t){e.$set(e.psdForm,"newpsd1",t)},expression:"psdForm.newpsd1"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"newpsd2"}},[a("el-input",{attrs:{"show-password":"",clearable:""},model:{value:e.psdForm.newpsd2,callback:function(t){e.$set(e.psdForm,"newpsd2",t)},expression:"psdForm.newpsd2"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.uptpsd()}}},[e._v("保存")])],1)],1)],1)],1)],1)],1)])},r=[],l=a("cf45"),o=a("ca00"),i=a("8c92"),d=a.n(i),n=(a("f753"),{data:function(){return{userId:null,roleId:null,data:"",img:"",activeName:"基本资料",imageUrl:"",dataForm:{nickName:"",phone:"",gender:"",address:""},psdForm:{oldpsd:"",newpsd1:"",newpsd2:""},genderList:[{value:"0",label:"女"},{value:"1",label:"男"}],rules:{nickName:[{required:!0,message:"请输入用户昵称",trigger:"blur"}],address:[{required:!0,message:"请输入地址",trigger:"blur"}],phone:[{required:!0,message:"请输入11位手机号",trigger:"blur"},{validator:o["isPhone"],trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"blur"}]},psdrules:{oldpsd:[{required:!0,message:"请输入旧密码",trigger:"blur"}],newpsd1:[{required:!0,message:"请输入新密码",trigger:"blur"}],newpsd2:[{required:!0,message:"请输入新密码",trigger:"blur"},{validator:this.verifypsd,trigger:"blur"}]}}},mounted:function(){this.userId=JSON.parse(localStorage.getItem("userdata")).userId,this.roleId=JSON.parse(localStorage.getItem("userdata")).roleId,this.details()},methods:{uploadFiles:function(){console.log(123);var e=this,t=this.$refs.upload.$refs["upload-inner"].$refs.input,a=t.files,s=new FileReader;s.readAsDataURL(a[0]),console.log(s),s.onload=function(t){console.log(t.target.result);var a={},s={};a.url="/f/upload",s.userId=e.userId,s.imgData=t.target.result,s.userId=e.userId,a.send=s,Object(l["a"])(a,e).then((function(t){console.log(t),e.imageUrl="http://192.168.0.79:9528/f/img/"+t.img,e.$refs.upload.uploadFiles=[]}),(function(e){}))}},details:function(){var e=this,t={},a={};t.url="/f/my/details",a.userId=this.userId,t.send=a,Object(l["a"])(t,this).then((function(t){console.log(t),0===t.code&&(e.data=t.data,e.dataForm.nickName=t.data.nickName,e.dataForm.phone=t.data.phone,e.dataForm.address=t.data.address,e.imageUrl="http://192.168.0.79:8888/f/img/"+t.data.img,e.img=t.data.img)}),(function(e){}))},reset:function(){this.dataForm.nickName=this.data.nickName,this.dataForm.phone=this.data.phone,this.dataForm.gender=this.data.gender},update:function(){var e=this;this.$refs.dataForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;var a={},s={};a.url="/f/my/myUptData",s.userId=e.userId,s.nickName=e.dataForm.nickName,s.phone=e.dataForm.phone,s.gender=e.dataForm.gender,a.send=s,Object(l["a"])(a,e).then((function(t){console.log(t),0===t.code&&(e.$message({message:t.msg,type:"success"}),e.details())}),(function(e){}))}))},verifypsd:function(e,t,a){return this.psdForm.newpsd1===this.psdForm.newpsd2?a():a(new Error("两次密码不一致"))},uptpsd:function(){var e=this;this.$refs.psdForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;var a={},s={};a.url="/f/my/uptpsd",s.userId=e.userId,s.oldpsd=e.psdForm.oldpsd,s.newpsd=e.psdForm.newpsd2,a.send=s,Object(l["a"])(a,e).then((function(t){console.log(t),0===t.code?(e.$message({message:t.msg,type:"success"}),e.logout()):e.$message({message:t.msg,type:"error"})}),(function(e){}))}))},logout:function(){var e=this,t={},a={};t.url="/f/logout",t.send=a,Object(l["a"])(t,this).then((function(t){d.a.remove("token"),window.localStorage.clear(),localStorage.removeItem("rou"),localStorage.removeItem("userdata"),localStorage.removeItem("jurisdiction"),e.$router.push("/login?redirect=".concat(e.$route.fullPath))}),(function(e){}))}}}),c=n,u=(a("3cb8"),a("8870"),a("5d22")),m=Object(u["a"])(c,s,r,!1,null,"09c3e96f",null);t["default"]=m.exports},c2b9:function(e,t,a){}}]);